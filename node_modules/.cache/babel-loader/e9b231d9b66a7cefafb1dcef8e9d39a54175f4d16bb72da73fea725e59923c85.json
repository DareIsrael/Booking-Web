{"ast":null,"code":"// import React, { useState, useContext } from 'react'\n// import './booking.css'\n// import { Form, FormGroup, ListGroupItem, Button, ListGroup } from 'reactstrap'\n// import { useNavigate } from 'react-router-dom'\n\n// import { AuthContext } from '../context/AuthContext'\n\n// import { BASE_URL } from '../../utils/config'\n\n// import useFetch from '../../hooks/useFetch'\n\n// const Booking = ({tour, avgRating}) => {\n\n//     const {price, reviews, title} = tour\n\n//     const navigate = useNavigate()\n\n//     const { user } = useContext (AuthContext) \n\n//     const [booking, setBooking] = useState({\n//         userId: user && user._id,\n//         userEmail: user && user.email,\n//         tourName:title,\n//         fullName:'',\n//         phone:'',\n//         guestSize: 1,\n//         bookAt:''\n//     })\n\n//     const handleChange = e => {\n//         setBooking(prev=>({...prev, [e.target.id]:e.target.value}))\n//     }\n\n//     const serviceFee = 10\n//     const totalAmount = Number(price) * Number(booking.guestSize) + Number (serviceFee)\n\n//     const handleClick =  async e => {\n//         e.preventDefault();\n//         console.log (booking)\n\n//         try {\n//             if (!user || user === undefined || user === null) {\n//                 return alert ('please sign in')\n//             }\n\n//             const res = await fetch (`${BASE_URL}/booking`, {\n//                 method: 'post',\n//                 headers: {\n//                     'content-type' : 'application/json'\n//                 },\n\n//                 credentials:'include',\n//                 body:JSON.stringify(booking)\n//             }) \n\n//             const result = await res.json()\n\n//             if(!res.ok) {\n//                 return alert(result.message)\n//             }\n\n//             // const { id } = useParams();\n//             // // const [bookingDetails, setBookingDetails] = useState(null);\n\n//             // const {data: book, loading, error } = useFetch(`${BASE_URL}/booking/${id}`);\n\n//             // const {fullName, phone, userId, userEmail, guestSize, bookAt} = book\n\n//             // const pdfGenerate = () => {\n\n//             //     // Generate PDF using booking details\n//             //     const doc = new jsPDF();\n//             //     doc.addImage(logo, 'PNG', 25, 5, 30, 30); // Add logo\n//             //     doc.setFontSize(12); // Set font size\n//             //     doc.setFont(\"Helvetica\", \"normal\"); // Set font style\n//             //     doc.text(10, 40, `Name: ${fullName}`);\n//             //     doc.text(10, 50, `Phone: ${phone}`);\n//             //     doc.text(10, 60, `User ID: ${userId}`);\n//             //     doc.text(10, 70, `Email: ${userEmail}`);\n//             //     doc.text(10, 80, `Guest Size: ${guestSize}`);\n//             //     doc.text(10, 90, `Booked At: ${new Date(bookAt).toLocaleString()}`);\n\n//             //     // Save the PDF\n//             //     doc.save(\"ticket.pdf\");\n//             // };\n\n//             navigate(\"/thank-you\")\n\n//         } catch (err) {\n//           alert('fill the form')\n//         }\n\n//         // console.log(credentials)\n\n//     }\n\n//   return (\n//     <div className='booking'>\n//      <div className='booking__top d-flex align-items-center justify-content-between'>\n//      <h3>#{price},000<span>/per person</span></h3>\n//      <span className='tour__rating d-flex align-items-center gap-1'>\n//         <i class=\"ri-star-s-fill\"></i>\n//         {avgRating === 0 ? null : avgRating} ({reviews?.length})\n//      </span>\n//      </div>\n\n//      {/* ============== booking form ============ */}\n//      <div className='booking__form'>\n//      <h5>Information</h5>\n//       <Form className='booking__info-form' onSubmit={handleClick}>\n//        <FormGroup>\n//         <input type='text' placeholder='Full Name' required id='fullName'  onChange={handleChange}></input>\n//        </FormGroup>\n//        <FormGroup>\n//         <input type='text' placeholder='Phone' required id='phone'  onChange={handleChange}></input>\n//        </FormGroup>\n//        <FormGroup className='d-flex align-items-center gap-3'>\n//         <input type='date' placeholder='' required  id='bookAt' onChange={handleChange}></input>\n//         <input type='number' placeholder='Traveller' required  id='guestSize'  onChange={handleChange}></input>\n//        </FormGroup>\n//       </Form>\n//      </div>\n\n//      {/* =================== booking end =============== */}\n\n//      {/* ====================== booking bottom =============== */}\n//        <div className='booking__bottom'>\n//         <ListGroup>\n//             <ListGroupItem className='border-0 px-0'>\n//             <h5 className='d-flex align-items-center gap-1'>#{price},000<i class=\"ri-close-line\"></i>1 person</h5>\n//             <span>#{price},000</span>\n//             </ListGroupItem>\n//             <ListGroupItem className='border-0 px-0'>\n//             <h5>Service charge</h5>\n//             <span>#{serviceFee},000</span>\n//             </ListGroupItem>\n//             <ListGroupItem className='border-0 px-0 total'>\n//             <h5>Total</h5>\n//             <span>#{totalAmount},000</span>\n//             </ListGroupItem>\n//         </ListGroup>\n//         <Button className='btn primary__btn w-100 mt-4' onClick={handleClick}>Book Now</Button>\n//        </div>\n\n//     </div>\n//   )\n// }\n\n// export default Booking","map":{"version":3,"names":[],"sources":["/Users/macbookair/WithYou/MernStack-Tour-Management/tour-management/frontend/src/components/Booking/Booking.js"],"sourcesContent":["// import React, { useState, useContext } from 'react'\n// import './booking.css'\n// import { Form, FormGroup, ListGroupItem, Button, ListGroup } from 'reactstrap'\n// import { useNavigate } from 'react-router-dom'\n\n// import { AuthContext } from '../context/AuthContext'\n\n// import { BASE_URL } from '../../utils/config'\n\n// import useFetch from '../../hooks/useFetch'\n\n\n// const Booking = ({tour, avgRating}) => {\n\n//     const {price, reviews, title} = tour\n\n//     const navigate = useNavigate()\n\n//     const { user } = useContext (AuthContext) \n\n//     const [booking, setBooking] = useState({\n//         userId: user && user._id,\n//         userEmail: user && user.email,\n//         tourName:title,\n//         fullName:'',\n//         phone:'',\n//         guestSize: 1,\n//         bookAt:''\n//     })\n\n//     const handleChange = e => {\n//         setBooking(prev=>({...prev, [e.target.id]:e.target.value}))\n//     }\n\n//     const serviceFee = 10\n//     const totalAmount = Number(price) * Number(booking.guestSize) + Number (serviceFee)\n     \n//     const handleClick =  async e => {\n//         e.preventDefault();\n//         console.log (booking)\n\n//         try {\n//             if (!user || user === undefined || user === null) {\n//                 return alert ('please sign in')\n//             }\n\n//             const res = await fetch (`${BASE_URL}/booking`, {\n//                 method: 'post',\n//                 headers: {\n//                     'content-type' : 'application/json'\n//                 },\n\n//                 credentials:'include',\n//                 body:JSON.stringify(booking)\n//             }) \n\n//             const result = await res.json()\n\n//             if(!res.ok) {\n//                 return alert(result.message)\n//             }\n\n//             // const { id } = useParams();\n//             // // const [bookingDetails, setBookingDetails] = useState(null);\n        \n//             // const {data: book, loading, error } = useFetch(`${BASE_URL}/booking/${id}`);\n           \n//             // const {fullName, phone, userId, userEmail, guestSize, bookAt} = book\n            \n        \n//             // const pdfGenerate = () => {\n                \n        \n//             //     // Generate PDF using booking details\n//             //     const doc = new jsPDF();\n//             //     doc.addImage(logo, 'PNG', 25, 5, 30, 30); // Add logo\n//             //     doc.setFontSize(12); // Set font size\n//             //     doc.setFont(\"Helvetica\", \"normal\"); // Set font style\n//             //     doc.text(10, 40, `Name: ${fullName}`);\n//             //     doc.text(10, 50, `Phone: ${phone}`);\n//             //     doc.text(10, 60, `User ID: ${userId}`);\n//             //     doc.text(10, 70, `Email: ${userEmail}`);\n//             //     doc.text(10, 80, `Guest Size: ${guestSize}`);\n//             //     doc.text(10, 90, `Booked At: ${new Date(bookAt).toLocaleString()}`);\n        \n//             //     // Save the PDF\n//             //     doc.save(\"ticket.pdf\");\n//             // };\n\n\n//             navigate(\"/thank-you\")\n\n\n//         } catch (err) {\n//           alert('fill the form')\n//         }\n\n//         // console.log(credentials)\n       \n//     }\n\n//   return (\n//     <div className='booking'>\n//      <div className='booking__top d-flex align-items-center justify-content-between'>\n//      <h3>#{price},000<span>/per person</span></h3>\n//      <span className='tour__rating d-flex align-items-center gap-1'>\n//         <i class=\"ri-star-s-fill\"></i>\n//         {avgRating === 0 ? null : avgRating} ({reviews?.length})\n//      </span>\n//      </div>\n\n//      {/* ============== booking form ============ */}\n//      <div className='booking__form'>\n//      <h5>Information</h5>\n//       <Form className='booking__info-form' onSubmit={handleClick}>\n//        <FormGroup>\n//         <input type='text' placeholder='Full Name' required id='fullName'  onChange={handleChange}></input>\n//        </FormGroup>\n//        <FormGroup>\n//         <input type='text' placeholder='Phone' required id='phone'  onChange={handleChange}></input>\n//        </FormGroup>\n//        <FormGroup className='d-flex align-items-center gap-3'>\n//         <input type='date' placeholder='' required  id='bookAt' onChange={handleChange}></input>\n//         <input type='number' placeholder='Traveller' required  id='guestSize'  onChange={handleChange}></input>\n//        </FormGroup>\n//       </Form>\n//      </div>\n\n\n//      {/* =================== booking end =============== */}\n\n\n//      {/* ====================== booking bottom =============== */}\n//        <div className='booking__bottom'>\n//         <ListGroup>\n//             <ListGroupItem className='border-0 px-0'>\n//             <h5 className='d-flex align-items-center gap-1'>#{price},000<i class=\"ri-close-line\"></i>1 person</h5>\n//             <span>#{price},000</span>\n//             </ListGroupItem>\n//             <ListGroupItem className='border-0 px-0'>\n//             <h5>Service charge</h5>\n//             <span>#{serviceFee},000</span>\n//             </ListGroupItem>\n//             <ListGroupItem className='border-0 px-0 total'>\n//             <h5>Total</h5>\n//             <span>#{totalAmount},000</span>\n//             </ListGroupItem>\n//         </ListGroup>\n//         <Button className='btn primary__btn w-100 mt-4' onClick={handleClick}>Book Now</Button>\n//        </div>\n\n//     </div>\n//   )\n// }\n\n// export default Booking\n\n\n\n\n\n\n\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAGA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}